clc
clear all
close all
fileName = 'senateEDD.csv';

Data=senateEDD1(fileName);

Time = cell2mat(Data(1,4:51));
rowsData = size(Data,1) - 1;
colsData = size(Data,2);
DataMat = cell2mat(Data(2:364,4:51));
rowsData = size(DataMat,1);
colsData = size(DataMat,2);


for n=1:rowsData
for m = 1:16
  if DataMat(n,m) > 10.5 
      fit(n,m) = 10.5;
  else
      fit(n,m) = cell2mat(Data(n,m));
  end
end

for m = 17:35
  if DataMat(n,m) > 16.5 
      fit(n,m) = 16.5;
  else
      fit(n,m) = cell2mat(Data(n,m));
  end
end

for m = 36:48
  if cell2mat(Data(n,m)) > 13 
      fit(n,m) = 13;
  else
      fit(n,m) =cell2mat(Data(n,m));
  end
end

end

yyaxis left
ha = area([17 18], [19 18], 'FaceColor', [.7 .7 .7],'LineStyle','none');
hold on
ylabel('Energy Usage/ kWh')
plot(Time, Data(2,4:51));
hold on
plot(Time, fit(2,4:51));
% plot(Time, fit2,'g');
% xlim([0,24])
ylim([10, 18])
% yyaxis right
% plot(Time, Energy-fit2,'--');
% ylabel('Battery Useage')
% title('Normal Usage Against Best Fit Battery ')
% xlabel('Time Of Day')
% set(gca,'Ydir','reverse')
% 
